!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="2605207b-bece-460f-a51e-8c11f572891f",t._sentryDebugIdIdentifier="sentry-dbid-2605207b-bece-460f-a51e-8c11f572891f")}catch(t){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5963],{56535:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.DashManifestPeriodParser=void 0;var r=i(17590),a=i(16754),n=i(71791),o=i(81055),s=i(81907),d=i(17395),l=i(88269),u=i(64215),h=i(77219),v=i(94306),g=i(6246),m=i(62436),c=i(48360),p=function(){function t(t){this._system=t,this._stringUtil=new r.StringUtil,this._drmInfoUtil=new h.DrmInfoUtil,this._nodeUtil=new o.DashUtil,this._languageUtil=new l.LanguageUtil,this._incrementingId=new m.IncrementingId,this._mimeUtil=new c.MimeUtil}return t.prototype._getKeyFormat=function(t){var e='schemeiduri="';switch(t.toLowerCase()){case"".concat(e).concat("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",'"'):return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";case"".concat(e).concat("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",'"'):return"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95";case"".concat(e).concat("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",'"'):return"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"}},t.prototype._getKeySystemsForFormat=function(t){switch(t){case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":return["com.widevine.alpha"];case"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":return["com.microsoft.playready.recommendation","com.microsoft.playready"];case"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":return["org.w3.clearkey"]}return[]},t.prototype.parsePeriods=function(e,i,r,o,s){for(var d,l,h,m,c=this,p=0,f=i.attributes;p<f.length;p++){var _=f[p];this._nodeUtil.startsWith(_,"mediaPresentationDuration=")&&(m=this._nodeUtil.parseSecondsFromISO8601(this._nodeUtil.getAttributeValue(_)))}for(var U=[],b=new n.NodeParser(i.rawBody),y=new v.HashMap,w=new v.HashMap,S=0,A=b.getDirectChildren();S<A.length;S++){var T=A[S];"Period"===T.type?U.push(T):"BaseURL"===T.type&&(r=this._updateBaseURL(r,new a.Uri(this._nodeUtil.getBodyValue(T).trim())))}for(var E=0;E<U.length;E++){for(var V=U[E],N=[],F=[],I=[],W=[],D=new n.NodeParser(V.rawBody),B=[],C=[],R=r,P=void 0,L=void 0,M=E.toString(),z=0,O=V.attributes;z<O.length;z++){var _=O[z];this._nodeUtil.startsWith(_,"start=")?P=this._nodeUtil.parseSecondsFromISO8601(this._nodeUtil.getAttributeValue(_)):this._nodeUtil.startsWith(_,"duration=")?L=this._nodeUtil.parseSecondsFromISO8601(this._nodeUtil.getAttributeValue(_)):this._nodeUtil.startsWith(_,"id=")&&(M=this._nodeUtil.getAttributeValue(_))}if(!(void 0!==s&&s.has(M))||0===E||E===U.length-1){for(var G=new v.HashMap,k=0,x=D.getDirectChildren();k<x.length;k++){var T=x[k];"AdaptationSet"===T.type?B.push(T):"EventStream"===T.type?this.parseEventStream(C,T):"BaseURL"===T.type&&(R=this._updateBaseURL(R,new a.Uri(this._nodeUtil.getBodyValue(T).trim())))}for(var H=0;H<B.length;H++){for(var K=B[H],Y=new n.NodeParser(K.rawBody),X=Y.getDirectChildren(),j=[],q=void 0,Q=void 0,$=void 0,J=void 0,Z=void 0,tt=void 0,te="und",ti=void 0,tr=void 0,ta=void 0,tn=void 0,to=void 0,ts=!1,td=!1,tl=!1,tu="none",th=void 0,tv=0,tg=K.attributes;tv<tg.length;tv++){var _=tg[tv];if(this._nodeUtil.startsWith(_,"contentType="))q=this._nodeUtil.getAttributeValue(_);else if(void 0===q&&this._nodeUtil.startsWith(_,"mimeType=")){$=this._nodeUtil.getAttributeValue(_);try{q=this._mimeUtil.getStreamTypeFromMimeType($)}catch(t){this._system.logVerbose(t)}}else this._nodeUtil.startsWith(_,"codecs=")?(Q=this._nodeUtil.getAttributeValue(_),void 0===q&&("wvtt"===Q||"stpp"===Q)&&(q="text")):this._nodeUtil.startsWith(_,"lang=")?te=this._languageUtil.normalize(this._nodeUtil.getAttributeValue(_)):this._nodeUtil.startsWith(_,"width=")?ta=this._nodeUtil.getAttributeValue(_):this._nodeUtil.startsWith(_,"height=")?tr=this._nodeUtil.getAttributeValue(_):this._nodeUtil.startsWith(_,"bandwidth=")?ti=this._nodeUtil.getAttributeValue(_):this._nodeUtil.startsWith(_,"frameRate=")&&(tn=this._nodeUtil.getAttributeValue(_))}var tm=this.getStreamType(q);if(void 0!==tm){for(var tc=R,tp=0;tp<X.length;tp++){var T=X[tp];switch(T.type){case"BaseURL":tc=this._updateBaseURL(tc,new a.Uri(this._nodeUtil.getBodyValue(T).trim()));break;case"ContentProtection":j.push(T);break;case"Label":to=this._nodeUtil.getBodyValue(T).trim();break;case"Accessibility":td||(td=this._nodeUtil.parseAudioDescription(T)),th=this._nodeUtil.parseEmbeddedCaptions(T);break;case"SupplementalProperty":ts||(ts=this._nodeUtil.parseDolbyAtmos(T));break;case"Role":tu=this._nodeUtil.containsRole(T,"forced-subtitle")?"forced-subtitle":this._nodeUtil.containsRole(T,"caption")?"caption":"none";break;case"EssentialProperty":tl||(tl="video"===tm&&this._nodeUtil.parseVideoRangePQ(T))}}var tf=this._tryGetBaseFromNode(K,Y,tc),t_=this._tryGetTemplateFromNode(K,Y,tc,y,null!=L?L:m,o),tU=this._tryGetListFromNode(K,Y,tc,y);void 0!==tf&&(J=tf),void 0!==t_&&(Z=t_),void 0!==tU&&(tt=tU);for(var tb=this,ty=0;ty<X.length;ty++)!function(t){if("Representation"===t.type){for(var e=new n.NodeParser(t.rawBody),i=tc,r=void 0,s=[],v=[],p=0,f=e.getDirectChildren();p<f.length;p++){var _=f[p];"BaseURL"===_.type?i=tb._updateBaseURL(i,new a.Uri(tb._nodeUtil.getBodyValue(_).trim())):"Label"===_.type?to=tb._nodeUtil.getBodyValue(_).trim():"Accessibility"===_.type?td=td||tb._nodeUtil.parseAudioDescription(_):"SupplementalProperty"===_.type?ts||(ts=tb._nodeUtil.parseDolbyAtmos(_)):"ContentProtection"===_.type&&v.push(_)}for(var U=null!==(d=tb._tryGetBaseFromNode(t,e,i))&&void 0!==d?d:J,b=null!==(l=tb._tryGetTemplateFromNode(t,e,i,y,null!=L?L:m,o))&&void 0!==l?l:Z,S=null!==(h=tb._tryGetListFromNode(t,e,i,y))&&void 0!==h?h:tt,A=0,T=t.attributes;A<T.length;A++){var E=T[A];tb._nodeUtil.startsWith(E,"codecs=")?Q=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"lang=")?te=tb._languageUtil.normalize(tb._nodeUtil.getAttributeValue(E)):tb._nodeUtil.startsWith(E,"width=")?ta=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"height=")?tr=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"bandwidth=")?ti=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"id=")?r=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"mimeType=")?$=tb._nodeUtil.getAttributeValue(E):tb._nodeUtil.startsWith(E,"frameRate=")&&(tn=tb._nodeUtil.getAttributeValue(E))}var V=void 0;void 0===U&&void 0===b&&"text"===tm&&(V={uri:i.toString()});for(var D=new g.HashSet,B=0;B<v.length;B++)for(var _=v[B],C=0,R=_.attributes;C<R.length;C++){var E=R[C];if(tb._nodeUtil.startsWith(E,"schemeIdUri=")){D.add(tb._nodeUtil.getAttributeValue(E).toLowerCase());break}}var P=j.filter(function(t){for(var e=0,i=t.attributes;e<i.length;e++){var r=i[e];if(c._nodeUtil.startsWith(r,"schemeIdUri="))return!D.has(c._nodeUtil.getAttributeValue(r).toLowerCase())}return!0}).concat(v);if(tb._processContentProtectionNodes(P,s,w),void 0!==U||void 0!==b||void 0!==V||void 0!==S){var z="".concat(M,"-").concat(r),O=tb.getRangeFromTemplateOrList(b,S);if("audio"===tm&&void 0!==Q)void 0!==O&&G.set("audio",O),N.push({id:z,codecs:Q,drm:s,language:te,isDefault:"mp4a.40.2"===Q,bandwidth:void 0===ti?void 0:Number(ti),base:U,template:b,singleFile:V,list:S,attributes:(td?1:0)|(ts?2:0),label:to,initSegment:tb.getInitSegment(z,U,b,S,r),representationId:r});else if("video"===tm&&void 0!==Q&&void 0!==ti&&void 0!==tr&&void 0!==ta)void 0!==O&&G.set("video",O),F.push({id:z,attributes:tl?32:0,bandwidth:Number(ti),codecs:Q,drm:s,width:Number(ta),height:Number(tr),frameRate:tb._parseFrameRate(tn),base:U,template:b,singleFile:V,list:S,label:to,initSegment:tb.getInitSegment(z,U,b,S,r),representationId:r,embeddedCaptions:th});else if("text"===tm){void 0!==O&&G.set("text",O);var k="application/mp4"===$?tb.getInitSegment(z,U,b,S,r):void 0,x=0;switch(tu){case"forced-subtitle":x|=4;break;case"caption":x|=8}I.push({id:z,attributes:x,codecs:null!=Q?Q:u.ContainerConstants.DEFAULT_TEXT_CODECS,drm:s,language:te,base:U,template:b,singleFile:V,list:S,label:to,initSegment:k,representationId:r,textRole:tu})}else if("image"===tm&&void 0!==ta&&void 0!==tr){void 0!==O&&G.set("image",O);var H=null!=$?$:u.ContainerConstants.DEFAULT_IMAGE_MIME_TYPE;W.push({id:z,attributes:0,drm:s,base:U,template:b,singleFile:V,list:S,label:to,mime:H,codecs:tb.getImageCodecForMime(H),bandwidth:void 0===ti?0:Number(ti),width:Number(ta),height:Number(tr),initSegment:void 0,representationId:r})}}}}(X[ty])}}var tw=G.coalesce(t.ALL_STREAM_TYPES);void 0===L&&void 0!==tw&&(L=tw.end-tw.start);for(var tS=0;tS<N.length;tS++){var tA=N[tS];this.finalizeTemplateStream(tA,L)}for(var tT=0;tT<F.length;tT++){var tA=F[tT];this.finalizeTemplateStream(tA,L)}for(var tE=0;tE<I.length;tE++){var tA=I[tE];this.finalizeTemplateStream(tA,L)}for(var tV=0;tV<W.length;tV++){var tA=W[tV];this.finalizeTemplateStream(tA,L)}e.push({periodId:M,periodStart:P,periodDuration:L,audio:N,video:F,text:I,image:W,schemeEvents:C})}}},t.prototype.finalizeTemplateStream=function(e,i){var r;if((null===(r=e.template)||void 0===r?void 0:r.finalizationData)!==void 0){if(void 0===i)throw new s.ManifestParserError("Missing period duration required for template finalization.");e.template.totalDuration=i,e.template.segmentTimes=t.getTemplateSegmentTimes(e.template.timescale,i,e.template.finalizationData.startNumber,e.template.finalizationData.segmentDuration,e.template.finalizationData.decodeShift,e.template.finalizationData.pto)}},t.getTemplateSegmentTimes=function(e,i,r,a,n,o){var s,d=i*e,l=o*e-n*e,u=Math.ceil(d/a-t.TEMPLATE_SEGMENT_COUNT_TOLERANCE);a=null!==(s=this._reverseEngineerFromAverageDuration(e,d,u))&&void 0!==s?s:a;for(var h=0,v=r,g=[],m=0;m<u;m++){var c=Math.min(h+a,d);h!==c&&g.push({start:h+l,end:c+l,position:v}),h=c,v++}return g},t.prototype.getRangeFromTemplateOrList=function(t,e){return void 0!==t&&t.segmentTimes.length>0&&void 0===t.finalizationData?{start:t.segmentTimes[0].start/t.timescale,end:t.segmentTimes[t.segmentTimes.length-1].end/t.timescale}:void 0!==e?{start:0,end:e.duration*e.items.length/e.timescale}:void 0},t.prototype.parseEventStream=function(t,e){for(var i,r=0,a=e.attributes;r<a.length;r++){var n=a[r];if(this._nodeUtil.startsWith(n,"schemeIdUri=")){i=this._nodeUtil.getAttributeValue(n);break}}if(void 0===i)throw new s.ManifestParserError("EventStream has no schemeIdUri");this._stringUtil.startsWith("urn:scte:scte35",i)||this.parseSchemeEventStream(t,e,i)},t.prototype.parseSchemeEventStream=function(t,e,i){for(var r,a,o,s=new n.NodeParser(e.rawBody).getDirectChildren(),d=0,l=Number.MAX_VALUE,u=1,h=0,v=0,g=e.attributes;v<g.length;v++){var m=g[v];this._nodeUtil.startsWith(m,"value=")?a=this._nodeUtil.getAttributeValue(m):this._nodeUtil.startsWith(m,"timescale=")?u=Number(this._nodeUtil.getAttributeValue(m)):this._nodeUtil.startsWith(m,"presentationTimeOffset=")?h=Number(this._nodeUtil.getAttributeValue(m)):this._nodeUtil.startsWith(m,"contentEncoding=")&&(o=this._nodeUtil.getAttributeValue(m))}for(var c=0;c<s.length;c++){var p=s[c];if("Event"===p.type){for(var f=0,_=p.attributes;f<_.length;f++){var m=_[f];this._nodeUtil.startsWith(m,"id=")?r=Number(this._nodeUtil.getAttributeValue(m)):this._nodeUtil.startsWith(m,"messageData=")?a=this._nodeUtil.getAttributeValue(m):this._nodeUtil.startsWith(m,"presentationTime=")?d=Number(this._nodeUtil.getAttributeValue(m))/u+h:this._nodeUtil.startsWith(m,"duration=")?l=d+Number(this._nodeUtil.getAttributeValue(m))/u:this._nodeUtil.startsWith(m,"contentEncoding=")&&(o=this._nodeUtil.getAttributeValue(m))}void 0!==a&&(void 0===r&&(r=this._incrementingId.getNext()),t.push({type:"scheme",schemeIdUri:i,id:r,value:a,start:d,end:l,encoding:o}))}}},t.prototype.getImageCodecForMime=function(t){return this._stringUtil.startsWith("image/",t)?t.substring(6):u.ContainerConstants.DEFAULT_IMAGE_CODECS},t.prototype.getStreamType=function(t){switch(t){case"audio":return"audio";case"video":return"video";case"text":return"text";case"image":return"image"}},t.prototype.getInitSegment=function(t,e,i,r,a){var n="".concat(t,"-init");if(void 0!==e)return{id:n,startByte:e.initializationRange[0],endByte:e.initializationRange[1],createUri:e.uri};if(void 0!==i&&void 0!==i.initializationUri)return{id:n,createUri:this._nodeUtil.getUriFromTemplate(i.initializationUri,void 0,void 0,a)};if(void 0!==r&&void 0!==r.initializationUri)return{id:n,createUri:r.initializationUri};throw new d.ManifestProcessingError("Unexpected: segment information missing")},t.prototype._tryGetBaseFromNode=function(t,e,i){if(-1!==t.rawBody.indexOf("<SegmentBase")&&-1!==t.rawBody.indexOf("Initialization")){var r=e.getFirstRecursiveChildByType("SegmentBase"),a=e.getFirstRecursiveChildByType("Initialization");if(void 0!==r&&void 0!==a){for(var n=void 0,o=void 0,s=0,d=a.attributes;s<d.length;s++){var l=d[s];this._nodeUtil.startsWith(l,"range=")&&(n=this._nodeUtil.parseRange(this._nodeUtil.getAttributeValue(l)))}for(var u=0,h=r.attributes;u<h.length;u++){var l=h[u];this._nodeUtil.startsWith(l,"indexRange=")&&(o=this._nodeUtil.parseRange(this._nodeUtil.getAttributeValue(l)))}if(void 0!==n&&void 0!==o){var v=this._nodeUtil.parsePresentationTimeOffset(r);return{uri:i.toString(),indexRange:o,initializationRange:n,representationTimeOffset:v}}}}},t.prototype._tryGetTemplateFromNode=function(e,i,r,o,d,l){var u;if(-1!==e.rawBody.indexOf("<SegmentTemplate")){var h=i.getFirstRecursiveChildByType("SegmentTemplate");if(void 0===h)return;for(var g=i.getFirstRecursiveChildByType("SegmentTimeline"),m=[],c=void 0,p=void 0,f=void 0,_=!1,U=void 0,b=1,y=0,w=0,S=h.attributes;w<S.length;w++){var A=S[w];this._nodeUtil.startsWith(A,"media=")?c=this._nodeUtil.getAttributeValue(A):this._nodeUtil.startsWith(A,"initialization=")?p=this._nodeUtil.getAttributeValue(A):this._nodeUtil.startsWith(A,"timescale=")?b=parseFloat(this._nodeUtil.getAttributeValue(A)):this._nodeUtil.startsWith(A,"startNumber=")?isNaN(y=parseInt(this._nodeUtil.getAttributeValue(A)))&&(y=0):this._nodeUtil.startsWith(A,"duration=")&&isNaN(f=parseFloat(this._nodeUtil.getAttributeValue(A)))&&(f=0)}var T=void 0,E=null!=l?l:0,V=null!==(u=this._nodeUtil.parsePresentationTimeOffset(h))&&void 0!==u?u:0;if(0===f&&void 0===g){this._system.logWarn("Found template stream with zero duration segments, ignoring template ".concat(c));return}if(void 0!==g)for(var N=new n.NodeParser(g.rawBody),F=void 0,I=y,W=0,D=N.getRecursiveChildrenByType("S");W<D.length;W++){for(var B=D[W],C=void 0,R=1,P=0,L=B.attributes;P<L.length;P++){var A=L[P];this._nodeUtil.startsWith(A,"t=")?F=parseFloat(this._nodeUtil.getAttributeValue(A)):this._nodeUtil.startsWith(A,"d=")?C=parseFloat(this._nodeUtil.getAttributeValue(A)):this._nodeUtil.startsWith(A,"r=")&&(R+=parseInt(this._nodeUtil.getAttributeValue(A)))}if(void 0!==F&&void 0!==C)for(var M=0;M<R;M++)C>0&&m.push({start:F,end:F+C,position:I}),I++,F+=C}else if(void 0!==f&&void 0!==d)_=!0,U=d,m.push.apply(m,t.getTemplateSegmentTimes(b,d,y,f,E,V));else if(void 0!==f)_=!0,T={pto:V,decodeShift:E,startNumber:y,segmentDuration:f};else throw new s.ManifestParserError("Missing segment timeline and/or template duration information");if(void 0!==c){var z=this._nodeUtil.parsePresentationTimeOffset(h),O=r.toString();o.contains(O)||o.set(O,new v.HashMap);var G=o.get(O),k=G.tryGet(c);void 0===k&&(k=r.resolve(new a.Uri(c)).toString(),G.set(c,k));var x=void 0;return void 0!==p&&void 0===(x=G.tryGet(p))&&(x=r.resolve(new a.Uri(p)).toString(),G.set(p,x)),{uriTemplate:k,initializationUri:x,timescale:b,segmentTimes:m,representationTimeOffset:z,durationBasedSegments:_,decodeShift:l,totalDuration:U,finalizationData:T}}}},t.prototype._tryGetListFromNode=function(t,e,i,r){if(-1!==t.rawBody.indexOf("<SegmentList")){var o=e.getFirstRecursiveChildByType("SegmentList");if(void 0!==o){for(var l=void 0,u=void 0,h=0,g=o.attributes;h<g.length;h++){var m=g[h];this._nodeUtil.startsWith(m,"timescale=")?u=parseFloat(this._nodeUtil.getAttributeValue(m)):this._nodeUtil.startsWith(m,"duration=")&&isNaN(l=parseFloat(this._nodeUtil.getAttributeValue(m)))&&(l=void 0)}for(var c=new n.NodeParser(o.rawBody),p=void 0,f=[],_=0,U=c.getDirectChildren();_<U.length;_++){var b=U[_];if("Initialization"===b.type){if(void 0!==p)throw new d.ManifestProcessingError("SegmentList with multiple initializations not supported");for(var y=0,w=b.attributes;y<w.length;y++){var m=w[y];if(this._nodeUtil.startsWith(m,"sourceURL=")){var S=this._nodeUtil.getAttributeValue(m),A=i.toString();r.contains(A)||r.set(A,new v.HashMap);var T=r.get(A),E=T.tryGet(S);void 0===E&&(E=i.resolve(new a.Uri(S)).toString(),T.set(S,E)),p=E}}}else if("SegmentURL"===b.type)for(var V=0,N=b.attributes;V<N.length;V++){var m=N[V];if(this._nodeUtil.startsWith(m,"media=")){var F=this._nodeUtil.getAttributeValue(m),A=i.toString();r.contains(A)||r.set(A,new v.HashMap);var T=r.get(A),I=T.tryGet(F);void 0===I&&(I=i.resolve(new a.Uri(F)).toString(),T.set(F,I)),f.push({mediaUri:I})}}else throw new d.ManifestProcessingError("SegmentList child type '".concat(b.type,"' not supported"))}if(void 0===l||void 0===u||void 0===p)throw new s.ManifestParserError("Did not metadata from SegmentList, duration=".concat(l,", timescale=").concat(u,", init=").concat(p));return{duration:l,timescale:u,initializationUri:p,items:f}}}},t.prototype._updateBaseURL=function(t,e){return""===e.getScheme()?t.resolve(e):e},t.prototype._processContentProtectionNodes=function(t,e,i){for(var r,a="ctr",o=0;o<t.length;o++)for(var d=t[o],l=0,u=d.attributes;l<u.length;l++){var h=u[l];void 0===r&&-1!==h.indexOf(':default_KID="')?(r=this._nodeUtil.getAttributeValue(h),r=this._stringUtil.replaceAll(r,"-","",function(){return""})):"ctr"===a&&'value="cbcs"'===h.toLowerCase()&&(a="cbc")}if(void 0!==r){"cbc"===a&&e.push(this._drmInfoUtil.makeCbcsFairPlayInfo(r));for(var v=0;v<t.length;v++)for(var d=t[v],g=0,m=d.attributes;g<m.length;g++){var h=m[g],c=this._getKeyFormat(h);if(void 0!==c){var p=void 0,f=new n.NodeParser(d.rawBody),_=f.getFirstRecursiveChildByType("cenc:pssh");if(void 0!==_)p=_.rawBody;else{var U=f.getFirstRecursiveChildByType("pssh");if(void 0===U)throw new s.ManifestParserError("Could not find PSSH in manifest");p=U.rawBody}for(var b=0,y=this._getKeySystemsForFormat(c);b<y.length;b++){var w=y[b];this._addDrmInfo(e,c,w,p,r,a,i)}}}}},t.prototype._addDrmInfo=function(t,e,i,r,a,n,o){var s=o.tryGet(r);void 0===s&&(s=this._stringUtil.toCharCode(this._stringUtil.fromStandardBase64(r)),o.set(r,s)),t.push({keyFormat:e,keySystem:i,initDataType:"cenc",initData:s,keyId:a,scheme:n})},t.prototype._parseFrameRate=function(t){if(void 0!==t){var e=t.match(/^(\d+)(\/(\d+))?$/);if(null!==e){var i=parseInt(e[1]);return void 0===e[3]?i:i/parseInt(e[3])}}},t._reverseEngineerFromAverageDuration=function(e,i,r){if(!(r<2)&&1!==e)for(var a=0,n=t.ISP_SEGMENT_DURATIONS.map(function(t){return t*e});a<n.length;a++){var o=n[a],s=i-o*(r-1);if(s>=0&&s<o)return o}},t.ALL_STREAM_TYPES=["video","audio","image","text"],t.TEMPLATE_SEGMENT_COUNT_TOLERANCE=.03,t.ISP_SEGMENT_DURATIONS=[2.002,4.004,6.006],t}();e.DashManifestPeriodParser=p}}]);
//# sourceMappingURL=lib-d05afe4a-1fa1764b60ae8428.js.map